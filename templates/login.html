<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" /> 
        <title>è¯·è¾“å…¥å¯†ç </title>
        <link rel="icon" href="{{ url_for('static', filename='mini_logo.png') }}">
        <script src="{{ url_for('static', filename='jquery-2.0.2.min.js') }}"></script>
        <script>
            // å¤åˆ¶è‡ªç¬¬ä¸€ä¸ªé¡µé¢çš„é¢œè‰²è®¡ç®—é€»è¾‘
            (function() {
                // å‡è®¾ theme_color é»˜è®¤ä¸º FF9800ï¼Œå¦‚æœæœªè®¾ç½®
                var rawColor = "{{ theme_color }}";
                if (!rawColor) rawColor = "FF9800"; 
                var hex = "#" + rawColor.replace(/^#/, '');

                var r = parseInt(hex.substring(1, 3), 16);
                var g = parseInt(hex.substring(3, 5), 16);
                var b = parseInt(hex.substring(5, 7), 16);

                r /= 255, g /= 255, b /= 255;
                var max = Math.max(r, g, b), min = Math.min(r, g, b);
                var h, s, l = (max + min) / 2;

                if (max == min) {
                    h = s = 0; 
                } else {
                    var d = max - min;
                    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                    switch (max) {
                        case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                        case g: h = (b - r) / d + 2; break;
                        case b: h = (r - g) / d + 4; break;
                    }
                    h /= 6;
                }
                
                function hslToHex(h, s, l) {
                    var r, g, b;
                    if (s == 0) {
                        r = g = b = l; 
                    } else {
                        var hue2rgb = function hue2rgb(p, q, t) {
                            if (t < 0) t += 1;
                            if (t > 1) t -= 1;
                            if (t < 1/6) return p + (q - p) * 6 * t;
                            if (t < 1/2) return q;
                            if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                            return p;
                        }
                        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                        var p = 2 * l - q;
                        r = hue2rgb(p, q, h + 1/3);
                        g = hue2rgb(p, q, h);
                        b = hue2rgb(p, q, h - 1/3);
                    }
                    var toHex = function(x) {
                        var hex = Math.round(x * 255).toString(16);
                        return hex.length === 1 ? '0' + hex : hex;
                    };
                    return "#" + toHex(r) + toHex(g) + toHex(b);
                }

                // è°ƒé«˜äº†é¥±å’Œåº¦å‚æ•° (ç¬¬äºŒä¸ªå‚æ•°)
                var cssVars = {
                    '--c-bg': hslToHex(h, 0.6, 0.97),
                    '--c-card': hslToHex(h, 0.75, 0.92),
                    '--c-hover': hslToHex(h, 0.5, 0.94),
                    '--c-accent': hslToHex(h, 0.95, 0.85),
                    '--c-text-sub': hslToHex(h, 0.5, 0.40),
                    '--c-text': hslToHex(h, 0.6, 0.29),
                    '--c-placeholder': hslToHex(h, 0.3, 0.82),
                    '--c-focus': hslToHex(h, 1.0, 0.50),
                    '--c-shadow': hslToHex(h, 0.3, 0.80)
                };

                var style = document.createElement('style');
                var cssString = ':root {';
                for (var key in cssVars) {
                    cssString += key + ': ' + cssVars[key] + ';';
                }
                cssString += '}';
                style.innerHTML = cssString;
                document.head.appendChild(style);
            })();
        </script>
    </head>
    <body>
        <div class="password-container">
            <h2 class="modal-title">NinoğŸ¥</h2>
            <form action="/login_submit" method="post" id="password-form">
                <div class="password-input-group">
                    <input type="password" required maxlength="6" name="password" id="password" placeholder="è¯·è¾“å…¥å¯†ç ...">
                    <button type="submit" id="submit-btn">ç¡®å®š</button>
                </div>
            </form>
        </div>

        <script>
            $(function(){
                // å¯é€‰ï¼šè¡¨å•æäº¤å‰çš„ç®€å•éªŒè¯
                $('#password-form').submit(function(e){
                    if($.trim($('#password').val()) === ''){
                        e.preventDefault();
                        alert('è¯·è¾“å…¥å¯†ç åå†æäº¤');
                    }
                })
            })
        </script>

        <style>
            @font-face {
                font-family: font;
                src: url({{ url_for('static', filename='font.ttf') }});
            }
            * {
                font-family: font;
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            /* æ›´æ”¹ï¼šä½¿ç”¨CSSå˜é‡ */
            body {
                background-color: var(--c-bg); /* èƒŒæ™¯é¢œè‰² */
                color: var(--c-text); /* ä¸»è¦æ–‡å­—é¢œè‰² */
                min-height: 100vh;
                padding: 0;
                margin: 0 auto;
                line-height: 1.6;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            /* å¯†ç å®¹å™¨ï¼Œå±…ä¸­æ˜¾ç¤º */
            .password-container {
                width: 100%;
                max-width: 400px;
                padding: 40px 20px;
                text-align: center;
            }

            .password-input-group {
                display: flex;
                flex-direction: column;
                gap: 15px;
                align-items: center;
            }

            /* å¯†ç è¾“å…¥æ¡†æ ·å¼ï¼ŒåŒ¹é…åŸæœ‰è¾“å…¥æ¡†é£æ ¼ */
            #password {
                width: 100%;
                max-width: 320px;
                padding: 15px 20px;
                /* æ›´æ”¹ï¼šä½¿ç”¨CSSå˜é‡ */
                border: 2px solid var(--c-accent); /* è¾¹æ¡†é¢œè‰²ä½¿ç”¨å¼ºè°ƒè‰² */
                border-radius: 25px;
                font-size: 16px;
                transition: all 0.3s ease;
                color: var(--c-text); /* æ–‡å­—é¢œè‰² */
                /* æ›´æ”¹ï¼šä½¿ç”¨CSSå˜é‡ */
                background-color: var(--c-bg); /* èƒŒæ™¯é¢œè‰²ä½¿ç”¨å¡ç‰‡è‰² */
                text-align: center;
            }

            /* æ›´æ”¹ï¼šä½¿ç”¨CSSå˜é‡ */
            #password::placeholder {
                color: var(--c-placeholder); /* å ä½ç¬¦é¢œè‰² */
                text-align: center;
            }

            /* æ›´æ”¹ï¼šä½¿ç”¨CSSå˜é‡ */
            #password:focus {
                outline: none;
                border-color: var(--c-focus); /* èšç„¦è¾¹æ¡†é¢œè‰² */
            }

            /* ç¡®å®šæŒ‰é’®æ ·å¼ï¼ŒåŒ¹é…åŸæœ‰æŒ‰é’®é£æ ¼ */
            #submit-btn {
                /* æ›´æ”¹ï¼šä½¿ç”¨CSSå˜é‡ */
                background-color: var(--c-accent); /* æŒ‰é’®èƒŒæ™¯è‰²ä½¿ç”¨å¼ºè°ƒè‰² */
                border: none;
                padding: 12px 35px;
                border-radius: 25px;
                font-size: 16px;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.15s ease;
                /* æ›´æ”¹ï¼šä½¿ç”¨CSSå˜é‡ */
                color: var(--c-text); /* æŒ‰é’®æ–‡å­—é¢œè‰² */
                line-height: 1;
                margin-bottom: 50px;
            }

            #submit-btn:hover {
                transform: translateY(-2px);
            }

            #submit-btn:active {
                transform: translateY(0);
            }

            #submit-btn:disabled {
                /* æ›´æ”¹ï¼šä½¿ç”¨CSSå˜é‡ */
                background-color: var(--c-accent); 
                opacity: 0.7;
                cursor: not-allowed;
                transform: none;
            }

            h2{
                font-size: 55px;
                margin-bottom: 20px;
            }

            /* å“åº”å¼è°ƒæ•´ */
            @media (max-width: 768px) {
                #password {
                    padding: 12px 15px;
                    font-size: 15px;
                }

                #submit-btn {
                    padding: 10px 30px;
                    font-size: 15px;
                }
            }
        </style>
    </body>
</html>